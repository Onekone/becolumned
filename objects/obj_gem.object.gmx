<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>sprite1</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>     checked = 0; // was passed by match checker
   destroyed = 0; // queued for deletion

invulnerable = 0; // should persist when deleting

       color = irandom(7) mod 7; // color of the gem
                  // -1 is hyper cube
     special = 0; // special type of the gem
                  // unused for columns; maybe later, for bejeweled
                  
        vsp  = 0;   // vertical speed
        grv  = 0.75; // gravity acceleration
     vspMax  = 18;  // vertical speed cap
        size = 80;
        
       grid  = instance_nearest(x,y,obj_grid); // grid that this gem is attached to
       if grid &gt; 0 {grid.movingGems++; size = grid.scale;} // grid should know that it has gem that is falling down
   gridLocked = 0;    // gem attached to the cell or freefalling
       gridX = -1;    // grid coordinates
       gridY = -1;       
       
       image_speed = 1/4;
       
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="1" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/*switch color {
case 0: c = $FF0000; break;
case 1: c = $FF8800; break;
case 2: c = $FFFF00; break;
case 3: c = $00FF00; break;
case 4: c = $00FFFF; break;
case 5: c = $FF00FF; break;
default: c = $FFFFFF; break;
}
 effect_create_above(ef_firework,x+26,y+26,2,c);
 */               
if (!gridLocked and grid&gt;0) {
    grid.movingGems--;
    if gridX&gt;0 and gridY&gt;0
    grid.grid[gridX,gridY] = noone;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>408</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>-1</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>1</exetype>
        <functionname>action_if</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>-1</isnot>
        <arguments>
          <argument>
            <kind>0</kind>
            <string>grid.paused</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if !gridLocked {
    vsp += grv;
    y += min(vsp,vspMax);
}
            
if ((x &gt;= grid.x and x&lt;grid.x + grid.scale*grid.gridWidth) 
    and (y &gt;= grid.y and y &lt; grid.y+grid.scale*grid.gridHeight)) {
    gridX = (x-grid.x) div grid.scale;
    x = grid.x + grid.scale*gridX;
    gridY = (y-grid.y) div grid.scale;
    
    if !gridLocked and (gridY+1 &gt;= grid.gridHeight or grid.grid[gridX,gridY+1] != noone) {
            gridLocked = true;
            grid.movingGems--;
            ds_stack_push(grid.stackCheck,id);
           while (gridY&gt;=0) {
               if gridY&lt;0 {break;}
               if grid.grid[gridX,gridY] != noone 
                   gridY--; 
               else break;}
               
               x = grid.x + gridX * grid.scale;
               y = grid.y + gridY * grid.scale;
               
            if gridY&gt;=0 {
                audio_stop_sound(gem_hit);
                audio_play_sound(gem_hit,0,0);
                grid.grid[gridX,gridY] = id;
                vsp = 0;
            } else {
                instance_destroy();
            }
    }
} else {
    gridLocked = false;  
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="0">
      <action>
        <libid>1</libid>
        <id>408</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>-1</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>1</exetype>
        <functionname>action_if</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>0</kind>
            <string>y &gt; room_height</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>203</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>1</exetype>
        <functionname>action_kill_object</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>draw_sprite_stretched(spr_gem,color,x,y,size,size);

//draw_sprite(sprite1,image_index,x,y);
//draw_sprite(sprite2,image_index,x,y);


</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
